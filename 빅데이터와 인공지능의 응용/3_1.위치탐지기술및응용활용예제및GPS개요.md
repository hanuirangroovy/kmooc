# 3주차. 인간 행동 탐지 및 응용➁

## 3-1. 위치 탐지 기술 및 응용 활용 예제 및 GPS 개요

- 사용자의 위치를 어떻게 하면 탐지할 수 있을지, 어떤 기술이 적용되고 있는지

- 위치

  - 소셜 네트워크에서 굉장히 많이 활용되고 있음
  - Example 1: Foursquare (Swarm)
  - Example 2 : Sports Tracker 
    - GPS를 활용해서 위치를 알 수 있다고 해도 위치 GPS를 가지고 속도와 위치를 계산할 수 있기에 이걸 바탕으로 Tracker 만드는 것 가능
  - Example 3 : Pokemon Go
    - 위치에 기반한 모바일 기기를 가지고 특정 위치에 가서 몬스터들을 사냥 등 위치 기반 게임
  - Example 4 : Kidgy
    - 아이가 어떤 안전 지역을 벗어나면 알려주는 어플리케이션
  - Example 5 : Waze
    - 크라우드 솔스 내비게이션, 내비게이션 애플리케이션을 활용하는 사용자들로부터 트래픽 정보를 계속 크라우드 솔싱해서 받아가지고 최신의 정확한 교통 정보를 반영해 내비게이션 서비스를 제공 
  - Example 6 : Urban Planning and Operation
    - 위치정보를 대규모로 모아 도시 계획에 활용 또는 도시의 운영에 활용

- 디바이스의 위치를 어떻게 알아낼 것 인가

  - 현재 스마트폰 : GPS가 있고 GPS는 현재 10~20M 정도의 accuracy 오차 가짐
  - GPS가 available하지 않은 경우 셀룰러망 어떤 셀타워에 접속하고 있는지를 바탕으로 좀 더 넓은 범위에서 위치를 알아낼 수 있음
  - 와이파이 GPS 셀룰러를 종합적으로 활용해 그때 상황에 맞게 활용해서 다양한 accuracy를 가지는 위치서비스를 제공

- GPS : Global Positioning System

  - 우주 공간상 떠있는 여러 개 위성들에서부터 오는 신호를 바탕으로 디바이스의 위치를 추론해내는 기술
  - GPS 시스템의 핵심요소 : GPS 세틀라이트(Space Vehicles)
    - Satellites는 태양열 전지판을 통해서 지속적으로 파워를 공급받으며 돌아감.
    - 지상기지국으로부터 신호를 받아 자기의 위치나 시간을 계속해서 조율하게 됨. 
    - 이 기지국에서는 지상으로 계속해서 신호를 보내게 됨.
    - 자기 위성의 3차원 공간상에서의 위치정보를 계속 보내게 되고 보낸 시그널에 이 시그널을 언제 보냈다라는 시간 정보를 담게 됨
    - 애플리케이션에 따라 두 가지 채널
      - 군사 목적의 사용 혹은 라이센서를 확보한 사람들이 사용 : 더욱 정확한 정보
      - 우리가 흔히 사용하는 민간, 민간의 사용을 위해서 또 다른 채널로 자기의 좌표 정보와 데이터를 보내는 시간 정보를 보내게 됨 : 약간 부정확

- Satellite Constellation

  - 총 24개의 Satellite (+3개의 백업 Satellite)
  - 12000m정도의 상공에서 계속해서 돌고 있음, 하루에 2바퀴 정도 지구 돌게 됨
  - 6개의 서로 다른  orbital planes에서 위성들이 돌아가게 됨
  - 이렇게 plane을 다르게 해야 지상에서 신호를 받을 떄 여러 개이 넓게 분포된 Satellite로부터 신호를 받을 수 있는 가능성이 커지기 때문에 6개의 서로 다른 plane에서 궤도를 돌게 설계해둠

- 위성정보로부터 신호를 받아서 어떻게 위치를 탐지할 수 있을까

  - 위성 1개
    - 위성이 시그널을 지상으로 계속 보내게 되는데 이 시그널에는 위성이 신호를 보내는 시간이 적혀 있음.
    - 디바이스가 있고 신호를 받은 시간을 디바이스에서 알게 됨
    - 신호를 보낸 시간과 받은 시간을 알고있으면 우리가 이 시그널은 빛의 신호로 트래벌링함
    - 속도와 시간 차를 알고 있으면 위성에서 이 장치까지 거리가 얼마나 되는 지 알수 있음
    - 거리를 알 수 있다는 이야기는 만약 1차원 공간상을 생각한다면 위치를 바로 알 수 있다는 것
  - 지금은 3차원 공간상이기 때문에 거리만 알아서는 위성 하나에서 특정 거리만큼 떨어진 장치가 존재하는 걸 구상 어디엔가 장치가 존재하는 것만 알 수 있음
  - 3차원상의 X Y Z 정보를 알고 싶기에 위성 3개로부터 온 정보를 활용하면 됨
  - BUT 에러가 몇백키로미터 나옴
    - 위성끼리는 시간정보를 싱크로나이즈 해서 가지고 있음
    - 기지국에서 정보를 계속 받고 그걸 동기화하기에 위성 간에 시간 정보가 굉장히 정확하게 맞아있다고 보면되는데 이 디바이스의 시간 리시빙 타임이 맞아 있지 않기에 서고 다른 시간. 이 시가닝 다르다보니 정확히 위치 계산이 안됨
  - 해결책
    - 텀을 하나 넣음. 시간에서 에러 팩터를 하나 넣어줘야 함
    - 에러팩터를 넣어서 빛의 속도를 곱해 거리계산에 반영 해주게 됨
    - 에러팩터가 들어가다 보니 X Y Z 말고 이 에러가 얼마만큼은지를 알아내야 함.
    - 그렇기에 위성이 하나 더 필요함
    - 즉, 3D 공간상에서 디바이스의 위치를 알아내기 위해서 위성 4개로부터의 신호가 필요함
    - 위성 4개로부터 오는 신호를 수식을 기반으로 계산해보면 10~20M 이내에서 오차를 가지는 위치정보를 탐지할 수 있게 됨
  - GPS 단점
    - 작동을 잘 안하는 케이스들이 있음 : 응용을 만들 때 이런 케이스들을 잘 고려해서 만들어야 되기 때문에 살펴봐야함
      - GPS Cannot "See" Through Objects!
        - GPS 시그널이 기본적으로 라인 오프사잇이 확보 되어서 GPS로부터 디바이스까지 신호가 딱 오픈 스페이스상으로 보여야 함
        - 굉장히 큰 건물이나 산 등은 GPS 시그널이 잘 다다를 수 없기 때문에 부정확한 위치를 나타나게 됨
      - Poor Satellite Geometry
        - 높은 빌딩이 굉장히 많다보면 위성 4개 이상을 확보할 수 있는 경우도 생김
        - 위성이 굉장히 넓은 앵글에서 신호가 오는 게 아니라 좁은 앵글에서 신호가 오게 됨
        - 그래서 위성이 가깝게 몰려있게 도면 사실 에러가 더 크게 나타나는 현상을 관찰할 수가 있음
        - 위성에서 도착하는 신호가 건물이라든지 아니면 물이라든지 이런 데 반사돼서 돌아오게 되고 이것은 시간계산이 부정확하게 된다는 이야기.
        - 시간계산이 부정확하게 되면 당연히 위치의 오류가 더 커지게 됨

- GPS가 굉장히 커머셜리 많이 활용되고 있고 위성으로부터 오는 신호를 활용해가지고 디바이스의 위치를 탐지하기 위한 widely use된 기술이지만 이런 단점들을 가지고 있기에 단점들을 잘 이해해서 서비스를 build 해야 함

  

