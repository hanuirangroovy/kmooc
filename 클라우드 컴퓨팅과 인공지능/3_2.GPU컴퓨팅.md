# Week3. 클라우드 컴퓨팅

# 3.2  GPU 컴퓨팅

- GPU 컴퓨팅

  - Graphics Processing Unit의 약자

- 컴퓨팅 클라우드 구현

  - PC의 연산력 주체는 프로세서(CPU : Central Processing Unit)
  - CPU ➔ CPU + 별도의 하드웨어 ➔ CPU + GPU
  - GPU는 컴퓨터 화면에 제시되는 정보를 고속으로 처리하기 위해 개발 됨
  - GPU의 기존 원리를 일반 계산에 쓸 수 있도록 별도로 개발, 운영하게 됨
  - 별도로 보드에 꽂아서 사용하거나, CPU옆에 칩으로 올려서 사용할 수 있기 때문에 유지, 보수가 간편함
  - 최상의 써밋의 경우 2백만개 정도의 CPU 프로세서가 있고 씨에라 같은 건 130만 개가 있음 
  - GPU 사용으로 전체 전력 소모가 줄어듦

- GPU 장착하면 만능일까?

  - NO, GPU가 할 수 있는 프로그램 특성이 서로 부합이 되어야 쓰는 것. 내가 하고자하는 일이 잘할 수 있는 성격이 아니라면 사실 CPU가 많아도 별 효과가 없음
  - GPU는 일반화되어 쓸 수 있는 것이 아닌 약간 특화된 가속 장치라 보면 됨

- 연산유형별 CPU 효율

  - 벡터형은 계산 순서를 바꿔도 최종 결과가 동일하게 나타남
  - 벡터형 연산은 서로 의존성이 없음
  - GPU가 분할해서 동시 진행 가능함
  - GPU의 병렬성을 이용해 연산 속도를 비약적으로 증가시킬 수 있음

- GP GPU

  - 테슬라의 코어는 5120 기가임
  - 최대 성능은 15 TFLOPS 임 = 1015의 연산을 1초에 완료함

- 산술연산 가속용 GPU

  - CUDA (Compute Unified Device Architecture) - 쿠다
  - 확장가능한 병렬 프로그래밍 모델
  - C / C++또는 포트란 컴파일을 사용 가능함

- CUDA - 커널(Kernels) 및 쓰레드(Threads)

  - CUDA(not CPU) threads : 프로세서의 개념과 대응됨

  - 프로세서보다는 규모가 작아서 효율적으로 동작시킬 수 있음

  - 쓰레드 하나가 GPU에 있는 그 하드의 코어 하나에 대응해서 진행함

    - GPU 내에 백 개의 코어가 있다, 백 개의 작은 프로세서가 있다고 하면 스레드 백 까까지 띄워서 동시에 동작시킬 수 있는 체제

  - CUDA쓰레드는 라이트 웨이트 프로세서임

  - |     Terms(용어)      |                          의미                           |
    | :------------------: | :-----------------------------------------------------: |
    | Device(GPU 가속장치) |                    GPU 하드웨어 모듈                    |
    |    Host(주관 CPU)    |                    CPU(원 프로세서)                     |
    |     Kernel(커널)     | Function that runs on the device(한 개의 프로그램 모듈) |

  - CUDA가 CPU와 GPU의 자료를 분산, 조정하는 역할을 담당함

- 프로그램의 계층적 실행

  - 기계어(Instruction) - ADD R1, R2

  - 한 줄의 프로그램 - y= ax + b

  - 한 블록의 프로그램 - {s1; s2; ... ; sk}

  - 한 모듈 - Function - 함수

    ​			  - Module / Subroutine - 부프로그램

     - GPU가 동작할 때 모듈을 생성하며 생성된 모듈은 쓰레드에 대응되는 역할을 하게 됨

  		 	- GPU는 제공되는 연산을 전문적으로 해결하는 하드웨어임

- Small Changes, Big Speed-up
  - GPU를 사용함으로써 작업 속도를 향상시킴
  - 클라우드, 고성능 컴퓨팅 분야에서 활용함
  - 작업을 분산, 조정하는 번거로운 과정이 필요함
- CUDA - Threads
  - 한 모듈의 프로그램은 함수 하나 정도임
  - CUDA 쓰레드는 여러 개가 동시에 실행됨
  - CUDA 쓰레드가 처리하는 내용은 동일하지만 각각의 쓰레드는 각각의 데이터를 처리함
  - 낙서처럼 구불구불한 화살표  : 쓰레드 하나에 대한 심볼
    - 위에서부터 아래쪽으로 순차적으로 진행해서 끝낸다는 의미
    - 작업의 개수만큼 화살표가 증가함
- Thread Array(쓰레드 배열)
  - 쓰레드의 내용은 동일하지만, 적용되는 데이터는 다를 수 있음
  - 여러 개의 GPU 코어에 작업을 분해해 처리 속도를 향상시킴

- Thread 실행(Batching)
  - 배칭(Batching) : 여러 개를 순차적으로 실행한다는 의미
  - Grid : 하드웨어의 전체 규모
  - 제약 조건  : 블럭으로 해놓은 블럭하고 블럭 사이는 같은 하드웨어 내외로 보지만 하는 일이 다를 수 있고 의존성이 없음. 간섭X
  - 블럭들의 프로그램은 동일하지만 쓰레드는 다를 수 있음
  - 다른 블럭과의 협력은 해당 블록의 이해를 완성한 후에 이루어짐
  - 블록 내에 위치한 쉐어드 메모리는 해당 블록 내에서만 쉐어함
- GPU 구조
  - 최대 여덟 개의 쓰레드를 진행할 수 있는 멀티 프로세서의 모습
  - 멀티프로세서 : 쓰레드 프로세서 코어 + 공유메모리 + 쉐어드메모리
  - 다수의 멀티프로세서가 GPU내부에서 작업 진행을 도와줌
  - 멀티 프로세서가 다수 모여있는 것이 GPU
- 실행모델
  - Thread Processor : 멀티프로세서 8개 중 하나 잘라서 보이는 게 쓰레드 프로세서. 코어가 됨
  - Multiprocessor : 디바이스 하나를 잘라서 보인 게 멀티프로세서
  - Device :하드웨어 전체. 
- Memory 모델
  - 프로그램이 커널 하나 가지고 끝나지 않는다 하면 함수 여러 개를 순서로 실행
  - 병렬성에 따라 위쪽에 있는 건 상당히 많은 스레드가 동시에 진행하고 거기에 반해 아래쪽은 스레드 수가 줄어드는, 즉 뭘 하느냐에 따라 쓰레드의 필요량이 다름을 의미함
  - Global Memory : 메모리에서 데이터를 주고받음을 의미함



## QUIZ

1.  클라우드를 쓰지 않으면 혜택을 볼 수 없어 향후 모두 클라우드 컴퓨팅으로 옮겨가야 한다. (No)
2. GPU는 기존의 CPU의 연산을 대체하는 장치로, 더 이상 종전 CPU 방식의 컴퓨터는 성능면에서 경쟁상대가 안된다. (No)
3. 이제는 GPU가 성능을 발휘하도록 모든 프로그램을 수정해서 사용해야 한다.(No)
4. GPU 프로세서의 특징 - 병렬컴퓨팅, CUDA, 실수연산 가속장치
5. GPU 장치로 CPU 가 주고받는 정보 - 계산에 쓸 데이터, 사용할 쓰레드 개수

