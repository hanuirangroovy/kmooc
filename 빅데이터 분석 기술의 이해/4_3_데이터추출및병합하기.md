# 4. R 파일 입출력 및 데이터 처리



# 4-3. 데이터 추출 및 병합하기

## 필요한 데이터 추출하기

|   함수   |          설명           |
| :------: | :---------------------: |
| select() |    원하는 변수 선택     |
| filter() | 조건에 맞는 데이터 추출 |

- select() : 데이터 세트의 변수들 중 필요한 변수만 추출하는 함수(열을 선택)

- 파이프연산자(Pipe Operator) : dplyr 패키지의 함수. 데이터를 추출할 때 사용하는 연산자.

  %>%

  data1 %>% select(age)

  data1 %>% select(age, income, sex)

  ​	변수명을 쉼표로 구분하여 여러 개 변수 선택가능

  data1 %>% select(-age)

  data1 %>% select(-age, -income, -sex)

  ​	해당되는 변수만 제외할 때에는 -변수이름 이용

- filter() 함수 : 필요한 조건을 지정하여 조건에 맞는 데이터만 추출하는 함수. 자주 사용되는 유용한 함수.

  나이가 26세 이상인 사람과 여자만 추출

  data %>% filter(age >= 26 & sex = 1)



## 데이터 정렬하기

|      함수       |              설명               |
| :-------------: | :-----------------------------: |
|    arrage()     | 지정한 변수를 오름차순으로 정렬 |
| arrange(desc()) | 지정한 변수를 내림차순으로 정렬 |

- arrange() : age 변수를 기준으로 오름차순으로 정렬

  data1 %>% arrange(age)

- arrange(desc()) : income 변수를 기준으로 내림차순으로 정렬

  data1 %>% arrange(desc(income))

- 중첩하여 분류하기, 오름차순 내림차순의 혼합분류

  data1 %>% arrange(age, income)



## 데이터 요약하기

|    함수     |     설명      |
| :---------: | :-----------: |
| summarise() | 변수값의 합계 |
| group_by()  |  그룹별 합계  |

- summarise() 함수 

  income 변수를 기준으로 합계 계산

  data1 %>% summarise(total_income = sum(income))

- group_by() 파이프연산자의 복수 사용 

  남자들과 여자들의 수입합계 계산

  data1 %>% group_by(sex) %>% summarise(total_income=sum(income))



## 데이터 결합(merge)하기

|   구분    |     함수     |                             설명                             |
| :-------: | :----------: | :----------------------------------------------------------: |
| 세로 결합 | bind_rows()  |                     세로 결합(수직 결합)                     |
| 가로 결합 |  left_jon()  | 지정한 변수와 데이터 세트 1을 기준으로 데이터 세트 2의 변수들을 결합 |
| 가로 결합 | inner_join() | 데이터 세트1과 데이터 세트2에서 지정한 변수값이 같을 때만 결합 |
| 가로 결합 | full_join()  |  데이터 세트1과  데이터 세트2에서 지정한 변수값 전체를 결합  |

- bind_rows()함수

  m_data는 4개 관찰값과 8개의 변수

  f_data는 6개 관찰값과 8개 변수로 구성

  두 데이터 세트의 세로 결합(수직 결합) 명령

  data_bind <- bind_rows(m_data, f_data)

- 서로 다른 변수가 있을 경우에는 각 데이터 세트의 변수들이 모두 추가

- 가로결합

  - left_join()

    지정한 변수와 데이터 세트 1을 기준으로 데이터 세트 2의 변수들을 결합

  - inner_join()

    데이터 세트1과 데이터 세트2에서 지정한 변수값이 같을 때만 결합

  - full_join()

    데이터 세트1과 데이터 세트2에서  지정한 변수값 전체를 결합

